<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Layer Recipes</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#layer-recipes">Layer Recipes</a>
<ul class="sectlevel2">
<li><a href="#getting-a-layers-properties">Getting a Layer&#8217;s Properties</a></li>
<li><a href="#getting-a-layers-features">Getting a Layer&#8217;s Features</a>
<ul class="sectlevel3">
<li><a href="#each-feature">Each Feature</a></li>
<li><a href="#read-all-features">Read all Features</a></li>
<li><a href="#collect-values">Collect values</a></li>
<li><a href="#first">First</a></li>
<li><a href="#filter">Filter</a></li>
<li><a href="#cursor">Cursor</a></li>
</ul>
</li>
<li><a href="#adding-updating-and-deleting">Adding, Updating, and Deleting</a></li>
<li><a href="#shapefiles">Shapefiles</a>
<ul class="sectlevel3">
<li><a href="#read">Read</a></li>
<li><a href="#create">Create</a></li>
</ul>
</li>
<li><a href="#property">Property</a>
<ul class="sectlevel3">
<li><a href="#read-2">Read</a></li>
<li><a href="#create-2">Create</a></li>
</ul>
</li>
<li><a href="#geoprocessing">Geoprocessing</a>
<ul class="sectlevel3">
<li><a href="#reproject">Reproject</a></li>
<li><a href="#buffer">Buffer</a></li>
<li><a href="#dissolve">Dissolve</a></li>
<li><a href="#merge">Merge</a></li>
<li><a href="#split">Split</a></li>
<li><a href="#transform">Transform</a></li>
<li><a href="#raster">Raster</a></li>
</ul>
</li>
<li><a href="#layer-algebra">Layer Algebra</a>
<ul class="sectlevel3">
<li><a href="#clip">Clip</a></li>
<li><a href="#erase">Erase</a></li>
<li><a href="#identity">Identity</a></li>
<li><a href="#intersection">Intersection</a></li>
<li><a href="#symmetric-difference">Symmetric Difference</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#union">Union</a></li>
</ul>
</li>
<li><a href="#reading-and-writing-layers">Reading and Writing Layers</a>
<ul class="sectlevel3">
<li><a href="#finding-layer-writer-and-readers">Finding Layer Writer and Readers</a></li>
<li><a href="#geojson">GeoJSON</a></li>
<li><a href="#geobuf">GeoBuf</a></li>
<li><a href="#gml">GML</a></li>
<li><a href="#kml">KML</a></li>
<li><a href="#csv">CSV</a></li>
<li><a href="#georss">GeoRSS</a></li>
<li><a href="#gpx">GPX</a></li>
<li><a href="#mvt">MVT</a></li>
<li><a href="#pbf">PBF</a></li>
</ul>
</li>
<li><a href="#graticules">Graticules</a>
<ul class="sectlevel3">
<li><a href="#square">Square</a></li>
<li><a href="#hexagon">Hexagon</a></li>
<li><a href="#line">Line</a></li>
<li><a href="#rectangle">Rectangle</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="layer-recipes"><a class="anchor" href="#layer-recipes"></a>Layer Recipes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Layer classes are in the <strong><a href="http://geoscript.github.io/geoscript-groovy/api/1.14.0/geoscript/layer/package-summary.html">geoscript.layer</a></strong> package.</p>
</div>
<div class="paragraph">
<p>A Layer is a collection of Features.</p>
</div>
<div class="sect2">
<h3 id="getting-a-layers-properties"><a class="anchor" href="#getting-a-layers-properties"></a>Getting a Layer&#8217;s Properties</h3>
<div class="listingblock">
<div class="title">Get a Layer from a Workspace and it&#8217;s name</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">countries</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">String</span> name = layer.name
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Name: </span><span class="inline"><span class="inline-delimiter">${</span>name<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Name: countries</pre>
</div>
</div>
<div class="listingblock">
<div class="title">The Layer&#8217;s Format</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">String</span> format = layer.format
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Format: </span><span class="inline"><span class="inline-delimiter">${</span>format<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Format: GeoPackage</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Count the number of Features</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">int</span> count = layer.count
println <span class="string"><span class="delimiter">&quot;</span><span class="content"># of Features: </span><span class="inline"><span class="inline-delimiter">${</span>count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># of Features: 177</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Get the Layer&#8217;s Projection</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Projection proj = layer.proj
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Projection: </span><span class="inline"><span class="inline-delimiter">${</span>proj<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Projection: EPSG:4326</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Get the Bounds of the Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = layer.bounds
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Bounds: </span><span class="inline"><span class="inline-delimiter">${</span>bounds<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Bounds: (-179.99999999999997,-90.00000000000003,180.00000000000014,83.64513000000002,EPSG:4326)</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Get the minimum and maximum value from a Field.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">places</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>,<span class="predefined-type">Double</span>&gt; minMax = layer.minmax(<span class="string"><span class="delimiter">&quot;</span><span class="content">POP2050</span><span class="delimiter">&quot;</span></span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Minimum Population in 2050 = </span><span class="inline"><span class="inline-delimiter">${</span>minMax.min<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Maximum Population in 2050 = </span><span class="inline"><span class="inline-delimiter">${</span>minMax.max<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Minimum Population in 2050 = 0.0
Maximum Population in 2050 = 36400.0</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Calculate a histogram of values for a Field.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">places</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Double</span>&gt;&gt; values = layer.histogram(<span class="string"><span class="delimiter">&quot;</span><span class="content">POP2050</span><span class="delimiter">&quot;</span></span>, <span class="integer">10</span>)
values.each { <span class="predefined-type">List</span>&lt;<span class="predefined-type">Double</span>&gt; value -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>value[<span class="integer">0</span>]<span class="inline-delimiter">}</span></span><span class="content"> - </span><span class="inline"><span class="inline-delimiter">${</span>value[<span class="integer">1</span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>0.0 - 3640.0
3640.0 - 7280.0
7280.0 - 10920.0
10920.0 - 14560.0
14560.0 - 18200.0
18200.0 - 21840.0
21840.0 - 25480.0
25480.0 - 29120.0
29120.0 - 32760.0
32760.0 - 36400.0</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a List of interpolated values for a Field using a linear algorithm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">places</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Double</span>&gt; values = layer.interpolate(
        <span class="string"><span class="delimiter">&quot;</span><span class="content">POP2050</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="integer">10</span>,        <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">linear</span><span class="delimiter">&quot;</span></span>   <i class="conum" data-value="3"></i><b>(3)</b>
)
values.each { <span class="predefined-type">Double</span> value -&gt;
    println value
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Field Name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Number of classes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Algorithm</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>0.0
3640.0
7280.0
10920.0
14560.0
18200.0
21840.0
25480.0
29120.0
32760.0
36400.0</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a List of interpolated values for a Field using a exponetial algorithm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">values = layer.interpolate(
        <span class="string"><span class="delimiter">&quot;</span><span class="content">POP2050</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="integer">8</span>,         <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">exp</span><span class="delimiter">&quot;</span></span>      <i class="conum" data-value="3"></i><b>(3)</b>
)
values.each { <span class="predefined-type">Double</span> value -&gt;
    println value
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Field Name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Number of classes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Algorithm</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>0.0
2.7165430207384107
12.81269202499939
50.33546414312058
189.79046097748173
708.0809561693237
2634.3298787896188
9793.31686835896
36399.99999999998</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a List of interpolated values for a Field using a logarithmic algorithm</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">values = layer.interpolate(
        <span class="string"><span class="delimiter">&quot;</span><span class="content">POP2050</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="integer">12</span>,        <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">exp</span><span class="delimiter">&quot;</span></span>      <i class="conum" data-value="3"></i><b>(3)</b>
)
values.each { <span class="predefined-type">Double</span> value -&gt;
    println value
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Field Name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Number of classes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Algorithm</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>0.0
1.3993454247861767
4.75685846744236
12.81269202499939
32.14141941416279
78.51771304229133
189.79046097748173
456.77221963916656
1097.3536807854464
2634.3298787896188
6322.06668747619
15170.221127213848
36399.99999999998</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-a-layers-features"><a class="anchor" href="#getting-a-layers-features"></a>Getting a Layer&#8217;s Features</h3>
<div class="sect3">
<h4 id="each-feature"><a class="anchor" href="#each-feature"></a>Each Feature</h4>
<div class="listingblock">
<div class="title">Iterate over a Layer&#8217;s Features</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
layer.eachFeature { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Minnesota
Montana
North Dakota
Hawaii
Idaho
Washington
Arizona
California
Colorado
Nevada
...</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Iterate over a subset of a Layer&#8217;s Features</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
layer.eachFeature(<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 LIKE 'M%'</span><span class="delimiter">&quot;</span></span>) { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Minnesota
Montana
Missouri
Massachusetts
Mississippi
Maryland
Maine
Michigan</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Iterate over a Layer&#8217;s Features with parameters.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
layer.eachFeature(<span class="key">sort</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>], <span class="key">start</span>: <span class="integer">0</span>, <span class="key">max</span>: <span class="integer">5</span>, <span class="key">fields</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>], <span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 LIKE 'M%'</span><span class="delimiter">&quot;</span></span>) { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Maine
Maryland
Massachusetts
Michigan
Minnesota</pre>
</div>
</div>
<div class="paragraph">
<p>Parameters</p>
</div>
<div class="ulist">
<ul>
<li>
<p>filter: The Filter or Filter String to limit the Features. Defaults to null.</p>
</li>
<li>
<p>sort:  A List of Lists that define the sort order [[Field or Field name, "ASC" or "DESC"],&#8230;&#8203;]. Not all Layers support sorting!</p>
</li>
<li>
<p>max:  The maximum number of Features to include</p>
</li>
<li>
<p>start: The index of the record to start the cursor at.  Together with maxFeatures this simulates paging. Not all Layers support the start index and paging!</p>
</li>
<li>
<p>fields: A List of Fields or Field names to include.  Used to select only a subset of Fields.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="read-all-features"><a class="anchor" href="#read-all-features"></a>Read all Features</h4>
<div class="listingblock">
<div class="title">Read all Feature into a List</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">List</span>&lt;Feature&gt; features = layer.features

println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Features = </span><span class="inline"><span class="inline-delimiter">${</span>features.size()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
features.each { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># Features = 52
Minnesota
Montana
North Dakota
Hawaii
Idaho
Washington
Arizona
California
Colorado
Nevada
...</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="collect-values"><a class="anchor" href="#collect-values"></a>Collect values</h4>
<div class="listingblock">
<div class="title">Collect values from a Layer&#8217;s Features</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; names = layer.collectFromFeature { Feature f -&gt;
    f[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}.sort()

println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Names = </span><span class="inline"><span class="inline-delimiter">${</span>names.size()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
names.each { <span class="predefined-type">String</span> name -&gt;
    println name
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># Names = 52
Alabama
Alaska
Arizona
Arkansas
California
Colorado
Connecticut
Delaware
District of Columbia
Florida
...</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Collect values from a Layer&#8217;s Features with parameters.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; names = layer.collectFromFeature(
    <span class="key">sort</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>],
    <span class="key">start</span>: <span class="integer">0</span>,
    <span class="key">max</span>: <span class="integer">5</span>,
    <span class="key">fields</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>],
    <span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 LIKE 'M%'</span><span class="delimiter">&quot;</span></span>) { Feature f -&gt;
        f[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
    }

println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Names = </span><span class="inline"><span class="inline-delimiter">${</span>names.size()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
names.each { <span class="predefined-type">String</span> name -&gt;
    println name
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># Names = 5
Maine
Maryland
Massachusetts
Michigan
Minnesota</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="first"><a class="anchor" href="#first"></a>First</h4>
<div class="listingblock">
<div class="title">Get the first Feature that matches the Filter.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
Feature feature = layer.first(<span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1='Washington'</span><span class="delimiter">&quot;</span></span>)
println feature.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Washington</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_first.png" alt="layer first">
</div>
</div>
<div class="listingblock">
<div class="title">Get the first Feature sorted by name ascending and descending.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)

Feature featureAsc = layer.first(<span class="key">sort</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 ASC</span><span class="delimiter">&quot;</span></span>)
println featureAsc.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>)

Feature featureDesc = layer.first(<span class="key">sort</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 DESC</span><span class="delimiter">&quot;</span></span>)
println featureDesc.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Alabama
Wyoming</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter"><a class="anchor" href="#filter"></a>Filter</h4>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_first_sort.png" alt="layer first sort">
</div>
</div>
<div class="listingblock">
<div class="title">Create a new Layer from an existing Layer with just the Features that match a Filter.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">countries</span><span class="delimiter">&quot;</span></span>)
Layer disputedLayer = layer.filter(<span class="string"><span class="delimiter">&quot;</span><span class="content">TYPE='Disputed'</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_filter.png" alt="layer filter">
</div>
</div>
</div>
<div class="sect3">
<h4 id="cursor"><a class="anchor" href="#cursor"></a>Cursor</h4>
<div class="listingblock">
<div class="title">Iterate over a Layer&#8217;s Features with a Cursor</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Cursor</span> cursor = layer.cursor
cursor.each { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Minnesota
Montana
North Dakota
Hawaii
Idaho
Washington
Arizona
California
Colorado
Nevada
...</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Iterate over a subset of a Layer&#8217;s Features with a Cursor</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Cursor</span> cursor = layer.getCursor(<span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 LIKE 'M%'</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">while</span>(cursor.hasNext()) {
    Feature feature = cursor.next()
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Minnesota
Montana
Missouri
Massachusetts
Mississippi
Maryland
Maine
Michigan</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Iterate over a Layer&#8217;s Features with parameters with a Cursor</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>)
Layer layer = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
layer.getCursor(<span class="key">sort</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>], <span class="key">start</span>: <span class="integer">0</span>, <span class="key">max</span>: <span class="integer">5</span>, <span class="key">fields</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>], <span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1 LIKE 'M%'</span><span class="delimiter">&quot;</span></span>).each { Feature feature -&gt;
    println feature[<span class="string"><span class="delimiter">&quot;</span><span class="content">NAME_1</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Maine
Maryland
Massachusetts
Michigan
Minnesota</pre>
</div>
</div>
<div class="paragraph">
<p>Parameters</p>
</div>
<div class="ulist">
<ul>
<li>
<p>filter: The Filter or Filter String to limit the Features. Defaults to null.</p>
</li>
<li>
<p>sort:  A List of Lists that define the sort order [[Field or Field name, "ASC" or "DESC"],&#8230;&#8203;]. Not all Layers support sorting!</p>
</li>
<li>
<p>max:  The maximum number of Features to include</p>
</li>
<li>
<p>start: The index of the record to start the cursor at.  Together with maxFeatures this simulates paging. Not all Layers support the start index and paging!</p>
</li>
<li>
<p>fields: A List of Fields or Field names to include.  Used to select only a subset of Fields.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-updating-and-deleting"><a class="anchor" href="#adding-updating-and-deleting"></a>Adding, Updating, and Deleting</h3>
<div class="listingblock">
<div class="title">Add Features to a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)

<span class="comment">// Add a Feature with a Map</span>
<span class="predefined-type">Map</span> attributes = [
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>,
        <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
]
layer.add(attributes)

<span class="comment">// Add a Feature with a List</span>
<span class="predefined-type">List</span> values = [
        <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
        <span class="integer">2</span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
]
layer.add(values)

<span class="comment">// Add a Feature</span>
Feature feature = schema.feature([
        <span class="key">id</span>:<span class="integer">3</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fargo</span><span class="delimiter">&quot;</span></span>,
        <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>,
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">96.789444</span>, <span class="float">46.877222</span>)
])
layer.add(feature)

<span class="comment">// Add Features from a List of Maps</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.778889</span>, <span class="float">46.813333</span>),
                <span class="key">id</span>:<span class="integer">4</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bismarck</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.891111</span>, <span class="float">46.828889</span>),
                <span class="key">id</span>: <span class="integer">5</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mandan</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fargo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bismarck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_add.png" alt="layer add">
</div>
</div>
<div class="listingblock">
<div class="title">Update Features in a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
                <span class="key">id</span>: <span class="integer">1</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
                <span class="key">id</span>: <span class="integer">2</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">id</span>:<span class="integer">3</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fargo</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>,
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">96.789444</span>, <span class="float">46.877222</span>)
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.778889</span>, <span class="float">46.813333</span>),
                <span class="key">id</span>:<span class="integer">4</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bismarck</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.891111</span>, <span class="float">46.828889</span>),
                <span class="key">id</span>: <span class="integer">5</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mandan</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)

layer.update(layer.schema.state, <span class="string"><span class="delimiter">&quot;</span><span class="content">North Dakota</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">state='ND'</span><span class="delimiter">&quot;</span></span>)
layer.update(layer.schema.state, <span class="string"><span class="delimiter">&quot;</span><span class="content">Washington</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">state='WA'</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Washington</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Washington</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fargo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">North Dakota</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bismarck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">North Dakota</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">North Dakota</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_update_features.png" alt="layer update features">
</div>
</div>
<div class="listingblock">
<div class="title">Update Features in a Layer by setting values</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
                <span class="key">id</span>: <span class="integer">1</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
                <span class="key">id</span>: <span class="integer">2</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)

<span class="predefined-type">List</span>&lt;Feature&gt; layerFeatures = layer.features
layerFeatures[<span class="integer">0</span>].set(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>)
layerFeatures[<span class="integer">0</span>].set(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>)

layerFeatures[<span class="integer">1</span>].set(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>)
layerFeatures[<span class="integer">1</span>].set(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>)

layer.update()</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_update_set_features.png" alt="layer update set features">
</div>
</div>
<div class="listingblock">
<div class="title">Delete Features from a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
                <span class="key">id</span>: <span class="integer">1</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
                <span class="key">id</span>: <span class="integer">2</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">id</span>:<span class="integer">3</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fargo</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>,
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">96.789444</span>, <span class="float">46.877222</span>)
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.778889</span>, <span class="float">46.813333</span>),
                <span class="key">id</span>:<span class="integer">4</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bismarck</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.891111</span>, <span class="float">46.828889</span>),
                <span class="key">id</span>: <span class="integer">5</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mandan</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)

layer.delete(<span class="string"><span class="delimiter">&quot;</span><span class="content">state='ND'</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_delete.png" alt="layer delete">
</div>
</div>
<div class="listingblock">
<div class="title">Add Features to a Layer using a Writer.  A Writer can add Features more effeciently because is commits batches of Features in Transactions .</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)

Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
MultiPoint points = Geometry.createRandomPoints(bounds.geometry, <span class="integer">100</span>)

geoscript.layer.Writer writer = layer.writer
<span class="keyword">try</span> {
    points.geometries.eachWithIndex { <span class="predefined-type">Point</span> point, <span class="type">int</span> index -&gt;
        Feature feature = writer.newFeature
        feature[<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>] = index
        feature[<span class="string"><span class="delimiter">'</span><span class="content">geom</span><span class="delimiter">'</span></span>] = point
        writer.add(feature)
    }
} <span class="keyword">finally</span> {
    writer.close()
}</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_writer.png" alt="layer writer">
</div>
</div>
<div class="listingblock">
<div class="title">Add Features to a Layer using a Writer inside of a Closure.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)

Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
MultiPoint points = Geometry.createRandomPoints(bounds.geometry, <span class="integer">100</span>)

layer.withWriter { geoscript.layer.Writer writer -&gt;
    points.geometries.eachWithIndex { <span class="predefined-type">Point</span> point, <span class="type">int</span> index -&gt;
        Feature feature = writer.newFeature
        feature[<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>] = index
        feature[<span class="string"><span class="delimiter">'</span><span class="content">geom</span><span class="delimiter">'</span></span>] = point
        writer.add(feature)
    }
}</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_with_writer.png" alt="layer with writer">
</div>
</div>
</div>
<div class="sect2">
<h3 id="shapefiles"><a class="anchor" href="#shapefiles"></a>Shapefiles</h3>
<div class="paragraph">
<p>Shapefiles are a very commonly used format for storing spatial data.  So, instead of creating
a Directory Workspace and getting the Layer from the Workspace, you can use the Shapefile class.</p>
</div>
<div class="sect3">
<h4 id="read"><a class="anchor" href="#read"></a>Read</h4>
<div class="listingblock">
<div class="title">Read existing Shapefiles</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Shapefile countries = <span class="keyword">new</span> Shapefile(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/shapefiles/countries.shp</span><span class="delimiter">&quot;</span></span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Features in Countries = </span><span class="inline"><span class="inline-delimiter">${</span>countries.count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

Shapefile ocean = <span class="keyword">new</span> Shapefile(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/shapefiles/ocean.shp</span><span class="delimiter">&quot;</span></span>))
println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Features in Ocean = </span><span class="inline"><span class="inline-delimiter">${</span>ocean.count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># Features in Countries = 177

# Features in Ocean = 2</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_shapefile.png" alt="layer read shapefile">
</div>
</div>
</div>
<div class="sect3">
<h4 id="create"><a class="anchor" href="#create"></a>Create</h4>
<div class="listingblock">
<div class="title">Create a new Shapefile</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Directory workspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
                <span class="key">id</span>: <span class="integer">1</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
                <span class="key">id</span>: <span class="integer">2</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">id</span>:<span class="integer">3</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fargo</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>,
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">96.789444</span>, <span class="float">46.877222</span>)
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.778889</span>, <span class="float">46.813333</span>),
                <span class="key">id</span>:<span class="integer">4</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bismarck</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.891111</span>, <span class="float">46.828889</span>),
                <span class="key">id</span>: <span class="integer">5</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mandan</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fargo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bismarck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_create_shapefile.png" alt="layer create shapefile">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="property"><a class="anchor" href="#property"></a>Property</h3>
<div class="paragraph">
<p>GeoScript can store spatial data in a simple plain text format.  With the Property class
you can access a single property file directly.</p>
</div>
<div class="sect3">
<h4 id="read-2"><a class="anchor" href="#read-2"></a>Read</h4>
<div class="listingblock">
<div class="title">Read existing Property files</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">geoscript.layer.Property circles = <span class="keyword">new</span> geoscript.layer.Property(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/property/circles.properties</span><span class="delimiter">&quot;</span></span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Features in circles = </span><span class="inline"><span class="inline-delimiter">${</span>circles.count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

geoscript.layer.Property places = <span class="keyword">new</span> geoscript.layer.Property(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/property/places.properties</span><span class="delimiter">&quot;</span></span>))
println <span class="string"><span class="delimiter">&quot;</span><span class="content"># Features in places = </span><span class="inline"><span class="inline-delimiter">${</span>places.count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># Features in circles = 10

# Features in places = 10</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_property.png" alt="layer read property">
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-2"><a class="anchor" href="#create-2"></a>Create</h4>
<div class="listingblock">
<div class="title">Create a new Property</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">geoscript.workspace.Property workspace = <span class="keyword">new</span> geoscript.workspace.Property(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&gt; features = [
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.333056</span>, <span class="float">47.609722</span>),
                <span class="key">id</span>: <span class="integer">1</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.459444</span>, <span class="float">47.241389</span>),
                <span class="key">id</span>: <span class="integer">2</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WA</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">id</span>:<span class="integer">3</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Fargo</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>,
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">96.789444</span>, <span class="float">46.877222</span>)
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.778889</span>, <span class="float">46.813333</span>),
                <span class="key">id</span>:<span class="integer">4</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bismarck</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ],
        [
                <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">100.891111</span>, <span class="float">46.828889</span>),
                <span class="key">id</span>: <span class="integer">5</span>,
                <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mandan</span><span class="delimiter">&quot;</span></span>,
                <span class="key">state</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ND</span><span class="delimiter">&quot;</span></span>
        ]
]
layer.add(features)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seattle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tacoma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fargo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bismarck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ND</p></td>
</tr>
</tbody>
</table>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_create_shapefile.png" alt="layer create shapefile">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="geoprocessing"><a class="anchor" href="#geoprocessing"></a>Geoprocessing</h3>
<div class="sect3">
<h4 id="reproject"><a class="anchor" href="#reproject"></a>Reproject</h4>
<div class="listingblock">
<div class="title">Reproject a Layer from it&#8217;s source projection to a target projection</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="string"><span class="delimiter">'</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">'</span></span>)
Layer states = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">States = </span><span class="inline"><span class="inline-delimiter">${</span>states.proj<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

Projection projection = <span class="keyword">new</span> Projection(<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:3857</span><span class="delimiter">&quot;</span></span>)
Workspace outputWorkspace = <span class="keyword">new</span> Memory()
Layer statesInWebMercator = states.reproject(projection, outputWorkspace, <span class="string"><span class="delimiter">&quot;</span><span class="content">states_3857</span><span class="delimiter">&quot;</span></span>)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">Reprojected States = </span><span class="inline"><span class="inline-delimiter">${</span>statesInWebMercator.proj<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>States = EPSG:4326
Reprojected States = EPSG:3857</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_reproject.png" alt="layer reproject">
</div>
</div>
</div>
<div class="sect3">
<h4 id="buffer"><a class="anchor" href="#buffer"></a>Buffer</h4>
<div class="listingblock">
<div class="title">Buffer a Layer of populated places</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer places = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">places</span><span class="delimiter">&quot;</span></span>)
Layer buffer = places.buffer(<span class="integer">5</span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_buffer.png" alt="layer buffer">
</div>
</div>
</div>
<div class="sect3">
<h4 id="dissolve"><a class="anchor" href="#dissolve"></a>Dissolve</h4>
<div class="listingblock">
<div class="title">Dissolve a Layer by a Field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Directory(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data</span><span class="delimiter">&quot;</span></span>))
Layer states = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
Layer regions = states.dissolve(states.schema.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">SUB_REGION</span><span class="delimiter">&quot;</span></span>))</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_dissolve.png" alt="layer dissolve">
</div>
</div>
</div>
<div class="sect3">
<h4 id="merge"><a class="anchor" href="#merge"></a>Merge</h4>
<div class="listingblock">
<div class="title">Merge two Layer together</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Directory(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data</span><span class="delimiter">&quot;</span></span>))
Layer states = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
Feature washington = states.first(<span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STATE_NAME='Washington'</span><span class="delimiter">&quot;</span></span>)
Feature oregon = states.first(<span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STATE_NAME='Oregon'</span><span class="delimiter">&quot;</span></span>)

<span class="predefined-type">Schema</span> waSchema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">washington</span><span class="delimiter">&quot;</span></span>,[
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">int</span><span class="delimiter">&quot;</span></span>)
])
Layer waLayer = <span class="keyword">new</span> Memory().create(waSchema)
waLayer.withWriter { geoscript.layer.Writer writer -&gt;
    Geometry.createRandomPoints(washington.geom, <span class="integer">50</span>).points.eachWithIndex { <span class="predefined-type">Point</span> pt, <span class="type">int</span> index -&gt;
        writer.add(waSchema.feature([<span class="key">geom</span>: pt, <span class="key">id</span>: index]))
    }
}
println <span class="string"><span class="delimiter">&quot;</span><span class="content">The Washington Layer  has </span><span class="inline"><span class="inline-delimiter">${</span>waLayer.count<span class="inline-delimiter">}</span></span><span class="content"> features</span><span class="delimiter">&quot;</span></span>

<span class="predefined-type">Schema</span> orSchema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">oregon</span><span class="delimiter">&quot;</span></span>,[
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">int</span><span class="delimiter">&quot;</span></span>)
])
Layer orLayer = <span class="keyword">new</span> Memory().create(orSchema)
orLayer.withWriter { geoscript.layer.Writer writer -&gt;
    Geometry.createRandomPoints(oregon.geom, <span class="integer">50</span>).points.eachWithIndex { <span class="predefined-type">Point</span> pt, <span class="type">int</span> index -&gt;
        writer.add(orSchema.feature([<span class="key">geom</span>: pt, <span class="key">id</span>: index]))
    }
}
println <span class="string"><span class="delimiter">&quot;</span><span class="content">The Oregon Layer  has </span><span class="inline"><span class="inline-delimiter">${</span>orLayer.count<span class="inline-delimiter">}</span></span><span class="content"> features</span><span class="delimiter">&quot;</span></span>

Layer mergedLayer = orLayer.merge(waLayer)
println <span class="string"><span class="delimiter">&quot;</span><span class="content">The merged Layer has </span><span class="inline"><span class="inline-delimiter">${</span>mergedLayer.count<span class="inline-delimiter">}</span></span><span class="content"> features</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The Washington Layer  has 50 features
The Oregon Layer  has 50 features
The merged Layer has 100 features</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_merge.png" alt="layer merge">
</div>
</div>
</div>
<div class="sect3">
<h4 id="split"><a class="anchor" href="#split"></a>Split</h4>
<div class="listingblock">
<div class="title">Split a Layer into Layers based on the value from a Field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer rivers = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">rivers</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Memory()
rivers.split(rivers.schema.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">scalerank</span><span class="delimiter">&quot;</span></span>), outWorkspace)

outWorkspace.layers.each { Layer layer -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>layer.name<span class="inline-delimiter">}</span></span><span class="content"> has </span><span class="inline"><span class="inline-delimiter">${</span>layer.count<span class="inline-delimiter">}</span></span><span class="content"> features</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>rivers_0 has 1 features
rivers_1 has 27 features
rivers_2 has 35 features
rivers_3 has 53 features
rivers_4 has 71 features
rivers_5 has 67 features
rivers_6 has 206 features</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_splitbyfield.png" alt="layer splitbyfield">
</div>
</div>
<div class="listingblock">
<div class="title">Split a Layer into Layers based on another Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">grid</span><span class="delimiter">&quot;</span></span>,[
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Polygon</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">col</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">int</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">int</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">row_col</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>)
])
Workspace gridWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer gridLayer = gridWorkspace.create(schema)
<span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>).generateGrid(<span class="integer">2</span>, <span class="integer">3</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">polygon</span><span class="delimiter">&quot;</span></span>, {cell, col, row -&gt;
    gridLayer.add([
            <span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>: cell,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">col</span><span class="delimiter">&quot;</span></span>: col,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span>: row,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">row_col</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>row<span class="inline-delimiter">}</span></span><span class="content"> </span><span class="inline"><span class="inline-delimiter">${</span>col<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
    ])
})

Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer countries = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">countries</span><span class="delimiter">&quot;</span></span>)

Workspace outWorkspace = <span class="keyword">new</span> Memory()
countries.split(gridLayer,gridLayer.schema.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">row_col</span><span class="delimiter">&quot;</span></span>),outWorkspace)

outWorkspace.layers.each { Layer layer -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>layer.name<span class="inline-delimiter">}</span></span><span class="content"> has </span><span class="inline"><span class="inline-delimiter">${</span>layer.count<span class="inline-delimiter">}</span></span><span class="content"> features</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>countries_1_1 has 6 features
countries_1_2 has 6 features
countries_2_1 has 44 features
countries_2_2 has 74 features
countries_3_1 has 13 features
countries_3_2 has 70 features</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_splitbylayer.png" alt="layer splitbylayer">
</div>
</div>
</div>
<div class="sect3">
<h4 id="transform"><a class="anchor" href="#transform"></a>Transform</h4>
<div class="listingblock">
<div class="title">Transform one Layer into another Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Directory(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data</span><span class="delimiter">&quot;</span></span>))
Layer states = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">states</span><span class="delimiter">&quot;</span></span>)
Layer centroids = states.transform(<span class="string"><span class="delimiter">&quot;</span><span class="content">centroids</span><span class="delimiter">&quot;</span></span>, [
    <span class="key">geom</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">centroid(the_geom)</span><span class="delimiter">&quot;</span></span>,
    <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">strToUpperCase(STATE_NAME)</span><span class="delimiter">&quot;</span></span>,
    <span class="key">ratio</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">FEMALE / MALE</span><span class="delimiter">&quot;</span></span>
])
centroids.eachFeature(<span class="key">max</span>: <span class="integer">5</span>) {Feature f -&gt;
    println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>f.geom<span class="inline-delimiter">}</span></span><span class="content"> </span><span class="inline"><span class="inline-delimiter">${</span>f[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content"> = </span><span class="inline"><span class="inline-delimiter">${</span>f[<span class="string"><span class="delimiter">'</span><span class="content">ratio</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>ILLINOIS = 1.0587396098110435
DISTRICT OF COLUMBIA = 1.1447503268897763
DELAWARE = 1.0626439771122835
WEST VIRGINIA = 1.0817203227723509
MARYLAND = 1.0621588832568312</pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_transform.png" alt="layer transform">
</div>
</div>
</div>
<div class="sect3">
<h4 id="raster"><a class="anchor" href="#raster"></a>Raster</h4>
<div class="listingblock">
<div class="title">Create a Raster from the geometry and values of a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
Layer layer = workspace.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">earthquake</span><span class="delimiter">&quot;</span></span>, [
    <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Polygon</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
    <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">intensity</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Double</span><span class="delimiter">&quot;</span></span>)
])
<span class="predefined-type">Point</span> point = <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.387695</span>, <span class="float">47.572357</span>)

<span class="type">double</span> distance = <span class="float">5.0</span>
<span class="predefined-type">List</span>&lt;Geometry&gt; geometries = (<span class="integer">1</span>..<span class="integer">5</span>).collect { <span class="type">int</span> i -&gt;
    point.buffer(i * distance)
}

geometries.eachWithIndex { Geometry geometry, <span class="type">int</span> i -&gt;
    <span class="keyword">if</span> (i &gt; <span class="integer">0</span>) {
        Geometry previousGeometry = geometries.get(i - <span class="integer">1</span>)
        geometry = geometry.difference(previousGeometry)
    }
    layer.add([
        <span class="key">geom</span>: geometry,
        <span class="key">intensity</span>: (i + <span class="integer">1</span>) * <span class="integer">20</span>
    ])
}

<span class="predefined-type">Raster</span> raster = layer.getRaster(
    <span class="string"><span class="delimiter">&quot;</span><span class="content">intensity</span><span class="delimiter">&quot;</span></span>,  <i class="conum" data-value="1"></i><b>(1)</b>
    [<span class="integer">400</span>,<span class="integer">400</span>],    <i class="conum" data-value="2"></i><b>(2)</b>
    layer.bounds, <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="string"><span class="delimiter">&quot;</span><span class="content">intensity</span><span class="delimiter">&quot;</span></span>   <i class="conum" data-value="4"></i><b>(4)</b>
)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Field for values</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Raster size (width and height)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Raster bounds</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Name</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Layer</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_getraster_layer.png" alt="layer getraster layer">
</div>
</div>
<div class="paragraph">
<p>Raster</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_getraster_raster.png" alt="layer getraster raster">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="layer-algebra"><a class="anchor" href="#layer-algebra"></a>Layer Algebra</h3>
<div class="paragraph">
<p>GeoScript can do layer algebra.  All of the examples below use Layer A (red) and Layer B (green).</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_ab.png" alt="layer ab">
</div>
</div>
<div class="sect3">
<h4 id="clip"><a class="anchor" href="#clip"></a>Clip</h4>
<div class="listingblock">
<div class="title">Clip Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.clip(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_clip.png" alt="layer clip">
</div>
</div>
<div class="listingblock">
<div class="title">Clip Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.clip(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_clip</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_clip_to_workspace.png" alt="layer clip to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="erase"><a class="anchor" href="#erase"></a>Erase</h4>
<div class="listingblock">
<div class="title">Erase Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.erase(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_erase.png" alt="layer erase">
</div>
</div>
<div class="listingblock">
<div class="title">Erase Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.erase(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_erase</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_erase_to_workspace.png" alt="layer erase to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="identity"><a class="anchor" href="#identity"></a>Identity</h4>
<div class="listingblock">
<div class="title">Identity Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.identity(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_identity.png" alt="layer identity">
</div>
</div>
<div class="listingblock">
<div class="title">Identity Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.identity(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_identity</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_identity_to_workspace.png" alt="layer identity to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="intersection"><a class="anchor" href="#intersection"></a>Intersection</h4>
<div class="listingblock">
<div class="title">Intersection Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.intersection(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_intersection.png" alt="layer intersection">
</div>
</div>
<div class="listingblock">
<div class="title">Intersection Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.intersection(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_intersection</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_intersection_to_workspace.png" alt="layer intersection to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="symmetric-difference"><a class="anchor" href="#symmetric-difference"></a>Symmetric Difference</h4>
<div class="listingblock">
<div class="title">Symmetric Difference Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.symDifference(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_symDifference.png" alt="layer symDifference">
</div>
</div>
<div class="listingblock">
<div class="title">Symmetric Difference Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.symDifference(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_symdifference</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_symDifference_to_workspace.png" alt="layer symDifference to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="update"><a class="anchor" href="#update"></a>Update</h4>
<div class="listingblock">
<div class="title">Update Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.update(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_update.png" alt="layer update">
</div>
</div>
<div class="listingblock">
<div class="title">Update Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.update(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_update</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_update_to_workspace.png" alt="layer update to workspace">
</div>
</div>
</div>
<div class="sect3">
<h4 id="union"><a class="anchor" href="#union"></a>Union</h4>
<div class="listingblock">
<div class="title">Union Layer A with Layer B</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerA.union(layerB)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_union.png" alt="layer union">
</div>
</div>
<div class="listingblock">
<div class="title">Union Layer B with Layer A</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> GeoPackage(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/layeralgebra.gpkg</span><span class="delimiter">&quot;</span></span>))
Layer layerA = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>)
Layer layerB = workspace.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>)
Workspace outWorkspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layerC = layerB.union(layerA, <span class="key">outWorkspace</span>: outWorkspace, <span class="key">outLayer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ba_union</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_union_to_workspace.png" alt="layer union to workspace">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reading-and-writing-layers"><a class="anchor" href="#reading-and-writing-layers"></a>Reading and Writing Layers</h3>
<div class="paragraph">
<p>The Layer IO classes are in the <strong><a href="http://geoscript.github.io/geoscript-groovy/api/1.14.0/geoscript/layer/io/package-summary.html">geoscript.layer.io</a></strong> package.</p>
</div>
<div class="sect3">
<h4 id="finding-layer-writer-and-readers"><a class="anchor" href="#finding-layer-writer-and-readers"></a>Finding Layer Writer and Readers</h4>
<div class="listingblock">
<div class="title">List all Layer Writers</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">List</span>&lt;<span class="predefined-type">Writer</span>&gt; writers = Writers.list()
writers.each { <span class="predefined-type">Writer</span> writer -&gt;
    println writer.class.simpleName
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>CsvWriter
GeobufWriter
GeoJSONWriter
GeoRSSWriter
GmlWriter
GpxWriter
KmlWriter
MvtWriter</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Find a Layer Writer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

<span class="predefined-type">Writer</span> writer = Writers.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">csv</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">String</span> csv = writer.write(layer)
println csv</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>"geom:Point:EPSG:4326","id:Integer","name:String"
"POINT (-122.3204 47.6024)","1","Seattle"
"POINT (-122.48416 47.2619)","2","Tacoma"</pre>
</div>
</div>
<div class="listingblock">
<div class="title">List all Layer Readers</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">List</span>&lt;<span class="predefined-type">Reader</span>&gt; readers = Readers.list()
readers.each { <span class="predefined-type">Reader</span> reader -&gt;
    println reader.class.simpleName
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>CsvReader
GeobufReader
GeoJSONReader
GeoRSSReader
GmlReader
GpxReader
KmlReader
MvtReader</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Find a Layer Reader</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">Reader</span> reader = Readers.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">csv</span><span class="delimiter">&quot;</span></span>)
        Layer layer = reader.read(<span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">&quot;geom:Point:EPSG:4326&quot;,&quot;id:Integer&quot;,&quot;name:String&quot;
&quot;POINT (-122.3204 47.6024)&quot;,&quot;1&quot;,&quot;Seattle&quot;
&quot;POINT (-122.48416 47.2619)&quot;,&quot;2&quot;,&quot;Tacoma&quot;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>)
        println <span class="string"><span class="delimiter">&quot;</span><span class="content"># features = </span><span class="inline"><span class="inline-delimiter">${</span>layer.count<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre># features = 2</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="geojson"><a class="anchor" href="#geojson"></a>GeoJSON</h4>
<div class="listingblock">
<div class="title">Get GeoJSON String from a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
    <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
    <span class="key">id</span>: <span class="integer">1</span>,
    <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
    <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
    <span class="key">id</span>: <span class="integer">2</span>,
    <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

<span class="predefined-type">String</span> geojson = layer.toJSONString()
println geojson</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>{
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -122.3204,
                    47.6024
                ]
            },
            "properties": {
                "id": 1,
                "name": "Seattle"
            },
            "id": "fid-34d9214a_16d54d1675c_-68cc"
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -122.4842,
                    47.2619
                ]
            },
            "properties": {
                "id": 2,
                "name": "Tacoma"
            },
            "id": "fid-34d9214a_16d54d1675c_-68ca"
        }
    ]
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Write a Layer to a GeoJSON String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

GeoJSONWriter writer = <span class="keyword">new</span> GeoJSONWriter()
<span class="predefined-type">String</span> geojson = writer.write(layer)
println geojson</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>{
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -122.3204,
                    47.6024
                ]
            },
            "properties": {
                "id": 1,
                "name": "Seattle"
            },
            "id": "fid-34d9214a_16d54d1675c_-7e12"
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -122.4842,
                    47.2619
                ]
            },
            "properties": {
                "id": 2,
                "name": "Tacoma"
            },
            "id": "fid-34d9214a_16d54d1675c_-7e10"
        }
    ]
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a GeoJSON String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> geoJson = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
{
    &quot;type&quot;: &quot;FeatureCollection&quot;,
    &quot;features&quot;: [
        {
            &quot;type&quot;: &quot;Feature&quot;,
            &quot;geometry&quot;: {
                &quot;type&quot;: &quot;Point&quot;,
                &quot;coordinates&quot;: [
                    -122.3204,
                    47.6024
                ]
            },
            &quot;properties&quot;: {
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;Seattle&quot;
            },
            &quot;id&quot;: &quot;1&quot;
        },
        {
            &quot;type&quot;: &quot;Feature&quot;,
            &quot;geometry&quot;: {
                &quot;type&quot;: &quot;Point&quot;,
                &quot;coordinates&quot;: [
                    -122.681944,
                    45.52
                ]
            },
            &quot;properties&quot;: {
                &quot;id&quot;: 2,
                &quot;name&quot;: &quot;Portland&quot;
            },
            &quot;id&quot;: &quot;2&quot;
        }
    ]
}
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        GeoJSONReader reader = <span class="keyword">new</span> GeoJSONReader()
        Layer layer = reader.read(geoJson)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_geojson.png" alt="layer read geojson">
</div>
</div>
</div>
<div class="sect3">
<h4 id="geobuf"><a class="anchor" href="#geobuf"></a>GeoBuf</h4>
<div class="listingblock">
<div class="title">Get GeoBuf String from a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

<span class="predefined-type">String</span> geobuf = layer.toGeobufString()
println geobuf</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>0a0269640a046e616d6510021806223d0a1d0a0c08001a089fd8d374c0ebb22d6a0218016a090a0753656174746c650a1c0a0c08001a08ffd6e77498a3892d6a0218026a080a065461636f6d61</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Write a Layer to a GeoBuf String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.681944</span>, <span class="float">45.52</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Portland</span><span class="delimiter">&quot;</span></span>
])

GeobufWriter writer = <span class="keyword">new</span> GeobufWriter()
<span class="predefined-type">String</span> geobuf = writer.write(layer)
println geobuf</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>0a0269640a046e616d6510021806223f0a1d0a0c08001a089fd8d374c0ebb22d6a0218016a090a0753656174746c650a1e0a0c08001a08afe9ff7480d2b42b6a0218026a0a0a08506f72746c616e64</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a GeoBuf String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">String</span> geobuf = <span class="string"><span class="delimiter">&quot;</span><span class="content">0a0269640a046e616d6510021806223f0a1d0a0c08001a089fd8d374c0ebb22d6a0218016a090a0753656174746c650a1e0a0c08001a08afe9ff7480d2b42b6a0218026a0a0a08506f72746c616e64</span><span class="delimiter">&quot;</span></span>
GeobufReader reader = <span class="keyword">new</span> GeobufReader()
Layer layer = reader.read(geobuf)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_geobuf.png" alt="layer read geobuf">
</div>
</div>
</div>
<div class="sect3">
<h4 id="gml"><a class="anchor" href="#gml"></a>GML</h4>
<div class="listingblock">
<div class="title">Get GML String from a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

<span class="predefined-type">String</span> gml = layer.toGMLString()
println gml</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;wfs:FeatureCollection xmlns:wfs="http://www.opengis.net/wfs"&gt;
  &lt;gml:boundedBy xmlns:gml="http://www.opengis.net/gml"&gt;
    &lt;gml:Box srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
      &lt;gml:coord&gt;
        &lt;gml:X&gt;
          -122.48416
        &lt;/gml:X&gt;
        &lt;gml:Y&gt;
          47.2619
        &lt;/gml:Y&gt;
      &lt;/gml:coord&gt;
      &lt;gml:coord&gt;
        &lt;gml:X&gt;
          -122.3204
        &lt;/gml:X&gt;
        &lt;gml:Y&gt;
          47.6024
        &lt;/gml:Y&gt;
      &lt;/gml:coord&gt;
    &lt;/gml:Box&gt;
  &lt;/gml:boundedBy&gt;
  &lt;gml:featureMember xmlns:gml="http://www.opengis.net/gml"&gt;
    &lt;gsf:cities xmlns:gsf="http://geoscript.org/feature" fid="fid-34d9214a_16d54d1675c_-736d"&gt;
      &lt;gml:name&gt;
        Seattle
      &lt;/gml:name&gt;
      &lt;gsf:geom&gt;
        &lt;gml:Point&gt;
          &lt;gml:coord&gt;
            &lt;gml:X&gt;
              -122.3204
            &lt;/gml:X&gt;
            &lt;gml:Y&gt;
              47.6024
            &lt;/gml:Y&gt;
          &lt;/gml:coord&gt;
        &lt;/gml:Point&gt;
      &lt;/gsf:geom&gt;
      &lt;gsf:id&gt;
        1
      &lt;/gsf:id&gt;
    &lt;/gsf:cities&gt;
  &lt;/gml:featureMember&gt;
  &lt;gml:featureMember xmlns:gml="http://www.opengis.net/gml"&gt;
    &lt;gsf:cities xmlns:gsf="http://geoscript.org/feature" fid="fid-34d9214a_16d54d1675c_-736b"&gt;
      &lt;gml:name&gt;
        Tacoma
      &lt;/gml:name&gt;
      &lt;gsf:geom&gt;
        &lt;gml:Point&gt;
          &lt;gml:coord&gt;
            &lt;gml:X&gt;
              -122.48416
            &lt;/gml:X&gt;
            &lt;gml:Y&gt;
              47.2619
            &lt;/gml:Y&gt;
          &lt;/gml:coord&gt;
        &lt;/gml:Point&gt;
      &lt;/gsf:geom&gt;
      &lt;gsf:id&gt;
        2
      &lt;/gsf:id&gt;
    &lt;/gsf:cities&gt;
  &lt;/gml:featureMember&gt;
&lt;/wfs:FeatureCollection&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Write a Layer to a GML String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

GmlWriter writer = <span class="keyword">new</span> GmlWriter()
<span class="predefined-type">String</span> gml = writer.write(layer)
println gml</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;wfs:FeatureCollection xmlns:gsf="http://geoscript.org/feature" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wfs="http://www.opengis.net/wfs" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc"&gt;
&lt;gml:boundedBy&gt;
&lt;gml:Box srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
&lt;gml:coord&gt;
&lt;gml:X&gt;-122.48416&lt;/gml:X&gt;
&lt;gml:Y&gt;47.2619&lt;/gml:Y&gt;
&lt;/gml:coord&gt;
&lt;gml:coord&gt;
&lt;gml:X&gt;-122.3204&lt;/gml:X&gt;
&lt;gml:Y&gt;47.6024&lt;/gml:Y&gt;
&lt;/gml:coord&gt;
&lt;/gml:Box&gt;
&lt;/gml:boundedBy&gt;
&lt;gml:featureMember&gt;
&lt;gsf:cities fid="fid-34d9214a_16d54d1675c_-7393"&gt;
&lt;gml:name&gt;Seattle&lt;/gml:name&gt;
&lt;gsf:geom&gt;
&lt;gml:Point&gt;
&lt;gml:coord&gt;
&lt;gml:X&gt;-122.3204&lt;/gml:X&gt;
&lt;gml:Y&gt;47.6024&lt;/gml:Y&gt;
&lt;/gml:coord&gt;
&lt;/gml:Point&gt;
&lt;/gsf:geom&gt;
&lt;gsf:id&gt;1&lt;/gsf:id&gt;
&lt;/gsf:cities&gt;
&lt;/gml:featureMember&gt;
&lt;gml:featureMember&gt;
&lt;gsf:cities fid="fid-34d9214a_16d54d1675c_-7391"&gt;
&lt;gml:name&gt;Tacoma&lt;/gml:name&gt;
&lt;gsf:geom&gt;
&lt;gml:Point&gt;
&lt;gml:coord&gt;
&lt;gml:X&gt;-122.48416&lt;/gml:X&gt;
&lt;gml:Y&gt;47.2619&lt;/gml:Y&gt;
&lt;/gml:coord&gt;
&lt;/gml:Point&gt;
&lt;/gsf:geom&gt;
&lt;gsf:id&gt;2&lt;/gsf:id&gt;
&lt;/gsf:cities&gt;
&lt;/gml:featureMember&gt;
&lt;/wfs:FeatureCollection&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a GML String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> gml = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
&lt;wfs:FeatureCollection xmlns:gsf=&quot;http://geoscript.org/feature&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:wfs=&quot;http://www.opengis.net/wfs&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot; xmlns:ogc=&quot;http://www.opengis.net/ogc&quot;&gt;
    &lt;gml:boundedBy&gt;
        &lt;gml:Box srsName=&quot;http://www.opengis.net/gml/srs/epsg.xml#4326&quot;&gt;
            &lt;gml:coord&gt;
                &lt;gml:X&gt;-122.48416&lt;/gml:X&gt;
                &lt;gml:Y&gt;47.2619&lt;/gml:Y&gt;
            &lt;/gml:coord&gt;
            &lt;gml:coord&gt;
                &lt;gml:X&gt;-122.3204&lt;/gml:X&gt;
                &lt;gml:Y&gt;47.6024&lt;/gml:Y&gt;
            &lt;/gml:coord&gt;
        &lt;/gml:Box&gt;
    &lt;/gml:boundedBy&gt;
    &lt;gml:featureMember&gt;
        &lt;gsf:cities fid=&quot;fid-a7cd555_1634fc34503_-7fff&quot;&gt;
            &lt;gml:name&gt;Seattle&lt;/gml:name&gt;
            &lt;gsf:geom&gt;
                &lt;gml:Point&gt;
                    &lt;gml:coord&gt;
                        &lt;gml:X&gt;-122.3204&lt;/gml:X&gt;
                        &lt;gml:Y&gt;47.6024&lt;/gml:Y&gt;
                    &lt;/gml:coord&gt;
                &lt;/gml:Point&gt;
            &lt;/gsf:geom&gt;
            &lt;gsf:id&gt;1&lt;/gsf:id&gt;
        &lt;/gsf:cities&gt;
    &lt;/gml:featureMember&gt;
    &lt;gml:featureMember&gt;
        &lt;gsf:cities fid=&quot;fid-a7cd555_1634fc34503_-7ffd&quot;&gt;
            &lt;gml:name&gt;Portland&lt;/gml:name&gt;
            &lt;gsf:geom&gt;
                &lt;gml:Point&gt;
                    &lt;gml:coord&gt;
                        &lt;gml:X&gt;-122.681944&lt;/gml:X&gt;
                        &lt;gml:Y&gt;45.52&lt;/gml:Y&gt;
                    &lt;/gml:coord&gt;
                &lt;/gml:Point&gt;
            &lt;/gsf:geom&gt;
            &lt;gsf:id&gt;2&lt;/gsf:id&gt;
        &lt;/gsf:cities&gt;
    &lt;/gml:featureMember&gt;
&lt;/wfs:FeatureCollection&gt;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        GmlReader reader = <span class="keyword">new</span> GmlReader()
        Layer layer = reader.read(gml)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_gml.png" alt="layer read gml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="kml"><a class="anchor" href="#kml"></a>KML</h4>
<div class="listingblock">
<div class="title">Get KML String from a Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
    <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
    <span class="key">id</span>: <span class="integer">1</span>,
    <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
    <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
    <span class="key">id</span>: <span class="integer">2</span>,
    <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

<span class="predefined-type">String</span> kml = layer.toKMLString()
println kml</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;kml:kml xmlns:kml="http://www.opengis.net/kml/2.2"&gt;
  &lt;kml:Document&gt;
    &lt;kml:Folder&gt;
      &lt;kml:name&gt;
        cities
      &lt;/kml:name&gt;
      &lt;kml:Schema kml:name="cities" kml:id="cities"&gt;
        &lt;kml:SimpleField kml:name="id" kml:type="Integer"/&gt;
        &lt;kml:SimpleField kml:name="name" kml:type="String"/&gt;
      &lt;/kml:Schema&gt;
      &lt;kml:Placemark&gt;
        &lt;kml:name&gt;
          fid-34d9214a_16d54d1675c_-69d7
        &lt;/kml:name&gt;
        &lt;kml:Style&gt;
          &lt;kml:IconStyle&gt;
            &lt;kml:color&gt;
              ff0000ff
            &lt;/kml:color&gt;
          &lt;/kml:IconStyle&gt;
        &lt;/kml:Style&gt;
        &lt;kml:ExtendedData&gt;
          &lt;kml:SchemaData kml:schemaUrl="#cities"&gt;
            &lt;kml:SimpleData kml:name="id"&gt;
              1
            &lt;/kml:SimpleData&gt;
            &lt;kml:SimpleData kml:name="name"&gt;
              Seattle
            &lt;/kml:SimpleData&gt;
          &lt;/kml:SchemaData&gt;
        &lt;/kml:ExtendedData&gt;
        &lt;kml:Point&gt;
          &lt;kml:coordinates&gt;
            -122.3204,47.6024
          &lt;/kml:coordinates&gt;
        &lt;/kml:Point&gt;
      &lt;/kml:Placemark&gt;
      &lt;kml:Placemark&gt;
        &lt;kml:name&gt;
          fid-34d9214a_16d54d1675c_-69d5
        &lt;/kml:name&gt;
        &lt;kml:Style&gt;
          &lt;kml:IconStyle&gt;
            &lt;kml:color&gt;
              ff0000ff
            &lt;/kml:color&gt;
          &lt;/kml:IconStyle&gt;
        &lt;/kml:Style&gt;
        &lt;kml:ExtendedData&gt;
          &lt;kml:SchemaData kml:schemaUrl="#cities"&gt;
            &lt;kml:SimpleData kml:name="id"&gt;
              2
            &lt;/kml:SimpleData&gt;
            &lt;kml:SimpleData kml:name="name"&gt;
              Tacoma
            &lt;/kml:SimpleData&gt;
          &lt;/kml:SchemaData&gt;
        &lt;/kml:ExtendedData&gt;
        &lt;kml:Point&gt;
          &lt;kml:coordinates&gt;
            -122.48416,47.2619
          &lt;/kml:coordinates&gt;
        &lt;/kml:Point&gt;
      &lt;/kml:Placemark&gt;
    &lt;/kml:Folder&gt;
  &lt;/kml:Document&gt;
&lt;/kml:kml&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Write a Layer to a KML String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

KmlWriter writer = <span class="keyword">new</span> KmlWriter()
<span class="predefined-type">String</span> kml = writer.write(layer)
println kml</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;kml:kml xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:kml="http://earth.google.com/kml/2.1"&gt;
&lt;kml:Document&gt;
&lt;kml:Placemark id="fid-34d9214a_16d54d1675c_-738b"&gt;
&lt;kml:name&gt;Seattle&lt;/kml:name&gt;
&lt;kml:Point&gt;
&lt;kml:coordinates&gt;-122.3204,47.6024&lt;/kml:coordinates&gt;
&lt;/kml:Point&gt;
&lt;/kml:Placemark&gt;
&lt;kml:Placemark id="fid-34d9214a_16d54d1675c_-7389"&gt;
&lt;kml:name&gt;Tacoma&lt;/kml:name&gt;
&lt;kml:Point&gt;
&lt;kml:coordinates&gt;-122.48416,47.2619&lt;/kml:coordinates&gt;
&lt;/kml:Point&gt;
&lt;/kml:Placemark&gt;
&lt;/kml:Document&gt;
&lt;/kml:kml&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a KML String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> kml = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
&lt;kml:kml xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:kml=&quot;http://earth.google.com/kml/2.1&quot;&gt;
    &lt;kml:Document&gt;
        &lt;kml:Placemark id=&quot;fid-61215c1b_1634ca279f5_-7fff&quot;&gt;
            &lt;kml:name&gt;Seattle&lt;/kml:name&gt;
            &lt;kml:Point&gt;
                &lt;kml:coordinates&gt;-122.3204,47.6024&lt;/kml:coordinates&gt;
            &lt;/kml:Point&gt;
        &lt;/kml:Placemark&gt;
        &lt;kml:Placemark id=&quot;fid-61215c1b_1634ca279f5_-7ffd&quot;&gt;
            &lt;kml:name&gt;Portland&lt;/kml:name&gt;
            &lt;kml:Point&gt;
                &lt;kml:coordinates&gt;-122.681944,45.52&lt;/kml:coordinates&gt;
            &lt;/kml:Point&gt;
        &lt;/kml:Placemark&gt;
    &lt;/kml:Document&gt;
&lt;/kml:kml&gt;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        KmlReader reader = <span class="keyword">new</span> KmlReader()
        Layer layer = reader.read(kml)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_kml.png" alt="layer read kml">
</div>
</div>
</div>
<div class="sect3">
<h4 id="csv"><a class="anchor" href="#csv"></a>CSV</h4>
<div class="listingblock">
<div class="title">Write a Layer to a CSV String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

CsvWriter writer = <span class="keyword">new</span> CsvWriter()
<span class="predefined-type">String</span> csv = writer.write(layer)
println csv</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>"geom:Point:EPSG:4326","id:Integer","name:String"
"POINT (-122.3204 47.6024)","1","Seattle"
"POINT (-122.48416 47.2619)","2","Tacoma"</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a CSV String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> csv = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">&quot;geom:Point:EPSG:4326&quot;,&quot;id:Integer&quot;,&quot;name:String&quot;
&quot;POINT (-122.3204 47.6024)&quot;,&quot;1&quot;,&quot;Seattle&quot;
&quot;POINT (-122.681944 45.52)&quot;,&quot;2&quot;,&quot;Portland&quot;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        CsvReader reader = <span class="keyword">new</span> CsvReader()
        Layer layer = reader.read(csv)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_csv.png" alt="layer read csv">
</div>
</div>
</div>
<div class="sect3">
<h4 id="georss"><a class="anchor" href="#georss"></a>GeoRSS</h4>
<div class="listingblock">
<div class="title">Write a Layer to a GeoRSS String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

GeoRSSWriter writer = <span class="keyword">new</span> GeoRSSWriter()
<span class="predefined-type">String</span> georss = writer.write(layer)
println georss</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;feed xmlns:georss="http://www.georss.org/georss" xmlns="http://www.w3.org/2005/Atom"&gt;
&lt;title&gt;cities&lt;/title&gt;
&lt;subtitle&gt;cities geom: Point(EPSG:4326), id: Integer, name: String&lt;/subtitle&gt;
&lt;link&gt;http://geoscript.org/feature&lt;/link&gt;
&lt;entry&gt;
&lt;title&gt;fid-34d9214a_16d54d1675c_-7a1b&lt;/title&gt;
&lt;summary&gt;[geom:POINT (-122.3204 47.6024), id:1, name:Seattle]&lt;/summary&gt;
&lt;updated&gt;Sat Sep 21 10:15:00 PDT 2019&lt;/updated&gt;
&lt;georss:point&gt;47.6024 -122.3204&lt;/georss:point&gt;
&lt;/entry&gt;
&lt;entry&gt;
&lt;title&gt;fid-34d9214a_16d54d1675c_-7a19&lt;/title&gt;
&lt;summary&gt;[geom:POINT (-122.48416 47.2619), id:2, name:Tacoma]&lt;/summary&gt;
&lt;updated&gt;Sat Sep 21 10:15:00 PDT 2019&lt;/updated&gt;
&lt;georss:point&gt;47.2619 -122.48416&lt;/georss:point&gt;
&lt;/entry&gt;
&lt;/feed&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a GeoRSS String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> georss = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;feed xmlns:georss=&quot;http://www.georss.org/georss&quot; xmlns=&quot;http://www.w3.org/2005/Atom&quot;&gt;
&lt;title&gt;cities&lt;/title&gt;
&lt;subtitle&gt;cities geom: Point(EPSG:4326), id: Integer, name: String&lt;/subtitle&gt;
&lt;link&gt;http://geoscript.org/feature&lt;/link&gt;
&lt;entry&gt;
&lt;title&gt;Seattle&lt;/title&gt;
&lt;summary&gt;[geom:POINT (-122.3204 47.6024), id:1, name:Seattle]&lt;/summary&gt;
&lt;updated&gt;Fri May 11 15:23:05 PDT 2018&lt;/updated&gt;
&lt;georss:point&gt;47.6024 -122.3204&lt;/georss:point&gt;
&lt;/entry&gt;
&lt;entry&gt;
&lt;title&gt;Portland&lt;/title&gt;
&lt;summary&gt;[geom:POINT (-122.681944 45.52), id:2, name:Portland]&lt;/summary&gt;
&lt;updated&gt;Fri May 11 15:23:05 PDT 2018&lt;/updated&gt;
&lt;georss:point&gt;45.52 -122.681944&lt;/georss:point&gt;
&lt;/entry&gt;
&lt;/feed&gt;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        GeoRSSReader reader = <span class="keyword">new</span> GeoRSSReader()
        Layer layer = reader.read(georss)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_georss.png" alt="layer read georss">
</div>
</div>
</div>
<div class="sect3">
<h4 id="gpx"><a class="anchor" href="#gpx"></a>GPX</h4>
<div class="listingblock">
<div class="title">Write a Layer to a GPX String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

GpxWriter writer = <span class="keyword">new</span> GpxWriter()
<span class="predefined-type">String</span> gpx = writer.write(layer)
println gpx</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;gpx xmlns="http://www.topografix.com/GPX/1/1" version="1.1" creator="geoscript"&gt;
&lt;wpt lat="47.6024" lon="-122.3204"&gt;
&lt;name&gt;fid-34d9214a_16d54d1675c_-738f&lt;/name&gt;
&lt;/wpt&gt;
&lt;wpt lat="47.2619" lon="-122.48416"&gt;
&lt;name&gt;fid-34d9214a_16d54d1675c_-738d&lt;/name&gt;
&lt;/wpt&gt;
&lt;/gpx&gt;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a GPX String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">        <span class="predefined-type">String</span> gpx = <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;gpx xmlns=&quot;http://www.topografix.com/GPX/1/1&quot; version=&quot;1.1&quot; creator=&quot;geoscript&quot;&gt;
&lt;wpt lat=&quot;47.6024&quot; lon=&quot;-122.3204&quot;&gt;
&lt;name&gt;Seattle&lt;/name&gt;
&lt;/wpt&gt;
&lt;wpt lat=&quot;45.52&quot; lon=&quot;-122.681944&quot;&gt;
&lt;name&gt;Portland&lt;/name&gt;
&lt;/wpt&gt;
&lt;/gpx&gt;
</span><span class="delimiter">&quot;&quot;&quot;</span></span>
        GpxReader reader = <span class="keyword">new</span> GpxReader()
        Layer layer = reader.read(gpx)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_gpx.png" alt="layer read gpx">
</div>
</div>
</div>
<div class="sect3">
<h4 id="mvt"><a class="anchor" href="#mvt"></a>MVT</h4>
<div class="listingblock">
<div class="title">Write a Layer to a MVT String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

MvtWriter writer = <span class="keyword">new</span> MvtWriter()
<span class="predefined-type">String</span> mvt = writer.write(layer.reproject(<span class="keyword">new</span> Projection(<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:3857</span><span class="delimiter">&quot;</span></span>)))
println mvt</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>iU1WVAAAAGF4nGNgYGBiYGAQBWIGxoOZPw5M6bBa6xjOnRDd8rIcKCZZrZSZomRlqKOUl5ibqmSlFJyaWFKSk6pUi9CVxbjcy9Mh0zHsygrWwt2vgGISEF1GcF0hicn5uYlKtQBZLx7y</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a MVT String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">String</span> mvt = <span class="string"><span class="delimiter">&quot;</span><span class="content">iU1WVAAAAGF4nGNgYGBiYGAQBWIGxoOZPw5M6bBa6xjOnRDd8rIcKCZZrZSZomRlqKOUl5ibqmSlFJyaWFKSk6pUi9CVxbjcy9Mh0zHsygrWwt2vgGISEF1GcF0hicn5uYlKtQBZLx7y=</span><span class="delimiter">&quot;</span></span>
MvtReader reader = <span class="keyword">new</span> MvtReader()
Layer layer = reader.read(mvt)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_mvt.png" alt="layer read mvt">
</div>
</div>
</div>
<div class="sect3">
<h4 id="pbf"><a class="anchor" href="#pbf"></a>PBF</h4>
<div class="listingblock">
<div class="title">Write a Layer to PBF bytes</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Workspace workspace = <span class="keyword">new</span> Memory()
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">cities</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Integer</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>)
])
Layer layer = workspace.create(schema)
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.3204</span>, <span class="float">47.6024</span>),
        <span class="key">id</span>: <span class="integer">1</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Seattle</span><span class="delimiter">&quot;</span></span>
])
layer.add([
        <span class="key">geom</span>: <span class="keyword">new</span> <span class="predefined-type">Point</span>(-<span class="float">122.48416</span>, <span class="float">47.2619</span>),
        <span class="key">id</span>: <span class="integer">2</span>,
        <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tacoma</span><span class="delimiter">&quot;</span></span>
])

Pyramid pyramid = Pyramid.createGlobalMercatorPyramid(<span class="key">origin</span>: Pyramid.Origin.TOP_LEFT)
Tile tile = <span class="keyword">new</span> Tile(<span class="integer">4</span>,<span class="integer">2</span>,<span class="integer">5</span>)
Bounds bounds = pyramid.bounds(tile)

<span class="type">byte</span><span class="type">[]</span> bytes = Pbf.write([layer], bounds)
println bytes.encodeBase64()</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>GlYKBmNpdGllcxIPEgQAAAEBGAEiBQmGJNIlEg8SBAACAQMYASIFCcojiicaAmlkGgRuYW1lIgIwAiIJCgdTZWF0dGxlIgIwBCIICgZUYWNvbWEogCB4Ag==</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Read a Layer from a PBF Base64 encoded String</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">byte</span><span class="type">[]</span> bytes = <span class="string"><span class="delimiter">&quot;</span><span class="content">GlYKBmNpdGllcxIPEgQAAAEBGAEiBQmGJNIlEg8SBAACAQMYASIFCcojiicaAmlkGgRuYW1lIgIwAiIJCgdTZWF0dGxlIgIwBCIICgZUYWNvbWEogCB4Ag</span><span class="delimiter">&quot;</span></span>.decodeBase64()

Pyramid pyramid = Pyramid.createGlobalMercatorPyramid(<span class="key">origin</span>: Pyramid.Origin.TOP_LEFT)
Tile tile = <span class="keyword">new</span> Tile(<span class="integer">4</span>,<span class="integer">2</span>,<span class="integer">5</span>)
Bounds bounds = pyramid.bounds(tile)

<span class="predefined-type">List</span>&lt;Layer&gt; layers = Pbf.read(bytes, bounds)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_read_pbf.png" alt="layer read pbf">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="graticules"><a class="anchor" href="#graticules"></a>Graticules</h3>
<div class="sect3">
<h4 id="square"><a class="anchor" href="#square"></a>Square</h4>
<div class="listingblock">
<div class="title">Create a square graticules Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
<span class="type">double</span> length = <span class="integer">20</span>
<span class="type">double</span> spacing = <span class="integer">5</span>
Layer layer = Graticule.createSquares(bounds, length, spacing)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_square.png" alt="layer graticule square">
</div>
</div>
<div class="listingblock">
<div class="title">Create a square graticules Shapefile Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
<span class="type">double</span> length = <span class="integer">30</span>
<span class="type">double</span> spacing = -<span class="integer">1</span>
Workspace workspace = <span class="keyword">new</span> Directory(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>)
Layer layer = Graticule.createSquares(bounds, length, spacing, <span class="key">workspace</span>: workspace, <span class="key">layer</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">squares</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_square_shp.png" alt="layer graticule square shp">
</div>
</div>
</div>
<div class="sect3">
<h4 id="hexagon"><a class="anchor" href="#hexagon"></a>Hexagon</h4>
<div class="listingblock">
<div class="title">Create a flat hexagon graticules Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
<span class="type">double</span> length = <span class="integer">20</span>
<span class="type">double</span> spacing = <span class="integer">5</span>
<span class="predefined-type">String</span> orientation = <span class="string"><span class="delimiter">&quot;</span><span class="content">flat</span><span class="delimiter">&quot;</span></span>
Layer layer = Graticule.createHexagons(bounds, length, spacing, orientation)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_hexagon.png" alt="layer graticule hexagon">
</div>
</div>
<div class="listingblock">
<div class="title">Create a angled hexagon graticules Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
<span class="type">double</span> length = <span class="integer">10</span>
<span class="type">double</span> spacing = <span class="integer">5</span>
<span class="predefined-type">String</span> orientation = <span class="string"><span class="delimiter">&quot;</span><span class="content">angled</span><span class="delimiter">&quot;</span></span>
Layer layer = Graticule.createHexagons(bounds, length, spacing, orientation)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_hexagon_angled.png" alt="layer graticule hexagon angled">
</div>
</div>
<div class="listingblock">
<div class="title">Create a hexagon graticules Layer intersecting Washington States</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Layer states = <span class="keyword">new</span> Shapefile(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data/states.shp</span><span class="delimiter">&quot;</span></span>)
Feature feature = states.first(<span class="key">filter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STATE_NAME = 'Washington'</span><span class="delimiter">&quot;</span></span>)
Layer layer = Graticule.createHexagons(feature.bounds.expandBy(<span class="float">1.0</span>), <span class="float">0.2</span>, -<span class="float">1.0</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">flat</span><span class="delimiter">&quot;</span></span>, <span class="key">createFeature</span>: { GridElement e -&gt;
    <span class="keyword">new</span> <span class="predefined-type">Point</span>(e.center.x, e.center.y).buffer(<span class="float">0.2</span>).intersects(feature.geom)
})</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_hexagon_intersecting.png" alt="layer graticule hexagon intersecting">
</div>
</div>
<div class="listingblock">
<div class="title">Create a hexagon graticules Layer with a custom schema</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Layer states = <span class="keyword">new</span> Shapefile(<span class="string"><span class="delimiter">&quot;</span><span class="content">src/main/resources/data/states.shp</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Schema</span> schema = <span class="keyword">new</span> <span class="predefined-type">Schema</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">hexagon</span><span class="delimiter">&quot;</span></span>, [
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Polygon</span><span class="delimiter">&quot;</span></span>),
        <span class="keyword">new</span> <span class="predefined-type">Field</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">java.awt.Color</span><span class="delimiter">&quot;</span></span>)
])
Bounds b = states.bounds.expandBy(<span class="integer">1</span>)
Layer layer = Graticule.createHexagons(b, <span class="float">2.0</span>, -<span class="float">1.0</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">flat</span><span class="delimiter">&quot;</span></span>, <span class="key">schema</span>: schema, <span class="key">setAttributes</span>: { GridElement e, <span class="predefined-type">Map</span> attributes -&gt;
    attributes[<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>] = <span class="predefined-type">Color</span>.randomPastel.asColor()
})
layer.style = <span class="keyword">new</span> Fill(<span class="keyword">new</span> Property(<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>), <span class="float">0.5</span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_hexagon_customschema.png" alt="layer graticule hexagon customschema">
</div>
</div>
</div>
<div class="sect3">
<h4 id="line"><a class="anchor" href="#line"></a>Line</h4>
<div class="listingblock">
<div class="title">Create a line graticules Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
Layer layer = Graticule.createLines(bounds, [
        [<span class="key">orientation</span>: <span class="string"><span class="delimiter">'</span><span class="content">vertical</span><span class="delimiter">'</span></span>,   <span class="key">level</span>: <span class="integer">2</span>, <span class="key">spacing</span>: <span class="integer">20</span>],
        [<span class="key">orientation</span>: <span class="string"><span class="delimiter">'</span><span class="content">vertical</span><span class="delimiter">'</span></span>,   <span class="key">level</span>: <span class="integer">1</span>, <span class="key">spacing</span>: <span class="integer">10</span> ],
        [<span class="key">orientation</span>: <span class="string"><span class="delimiter">'</span><span class="content">horizontal</span><span class="delimiter">'</span></span>, <span class="key">level</span>: <span class="integer">2</span>, <span class="key">spacing</span>: <span class="integer">20</span>],
        [<span class="key">orientation</span>: <span class="string"><span class="delimiter">'</span><span class="content">horizontal</span><span class="delimiter">'</span></span>, <span class="key">level</span>: <span class="integer">1</span>, <span class="key">spacing</span>: <span class="integer">10</span> ]
], <span class="float">2.0</span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_lines.png" alt="layer graticule lines">
</div>
</div>
</div>
<div class="sect3">
<h4 id="rectangle"><a class="anchor" href="#rectangle"></a>Rectangle</h4>
<div class="listingblock">
<div class="title">Create a rectangular graticules Layer</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Bounds bounds = <span class="keyword">new</span> Bounds(-<span class="integer">180</span>,-<span class="integer">90</span>,<span class="integer">180</span>,<span class="integer">90</span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">EPSG:4326</span><span class="delimiter">&quot;</span></span>)
<span class="type">double</span> width = <span class="integer">20</span>
<span class="type">double</span> height = <span class="integer">10</span>
Layer layer = Graticule.createRectangles(bounds, width, height, -<span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="./images/layer_graticule_rect.png" alt="layer graticule rect">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-09-21 10:09:25 -0700
</div>
</div>
</body>
</html>